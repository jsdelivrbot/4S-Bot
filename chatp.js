function postMessage(e,t){if(e.keyCode==13){$("#privateChat_messageBox").val("");var n=API.getUser().id;addToChat(t,n);send(t)}}function addToChat(e,t){var n=API.getUser(t).username;var r="privateChat_"+API.getUser(t).permission;n=n+": ";var i=(new Date).toUTCString();var s=i.substring(13,i.length).indexOf(" ");i=(new Date).toUTCString().substring(14+s,i.length);i=i.substring(0,5)+"gmt";$("#privateChat_messagesFeed").append('<div class="privateChat_feed" style="display:block;"><div class="privateChat_timestamp">'+i+'</div><span style="font-weight:700;margin:0;padding:0;" class='+r+">"+n+'</span><span style="font-weight:400;margin:0;padding:0;" class="privateChat_message">'+e+"</span></div>")}function privateRecieve(e){var t=e.message;var n=t.substring(0,t.indexOf(" "));t=t.substring(t.indexOf(" ")+1,t.length);n=decryption(n,key);t=decryption(t,key);verifyTrueUser(n,t,e)}function verifyTrueUser(e,t,n){if(t.indexOf("@"+API.getUser().username)!=-1){var r="";var i=(new Date).getTime();i=i.toString();i=i.substring(7,i.length-3);if(e>=i-30){addToChat(t,n.fromID)}}}function send(e){var t=(new Date).getTime();t=t.toString();t=t.substring(7,t.length-3);e=encryption(e,key);t=encryption(t,key);e=t+" "+e;API.sendChat(e)}function substituteSymbols(e){e=replaceAll(",",sub.commar,e);e=replaceAll(".",sub.fullstop,e);e=replaceAll("/",sub.slash,e);e=replaceAll("?",sub.question,e);e=replaceAll("!",sub.exclemation,e);e=replaceAll(":",sub.colon,e);e=replaceAll(";",sub.semicolon,e);e=replaceAll("#",sub.hash,e);e=replaceAll("%",sub.persent,e);e=replaceAll("£",sub.pound,e);e=replaceAll("$",sub.dollar,e);e=replaceAll("&",sub.and,e);e=replaceAll("(",sub.leftbracket,e);e=replaceAll(")",sub.rightbracket,e);e=replaceAll("=",sub.equals,e);e=replaceAll("-",sub.dash,e);e=replaceAll("_",sub.under,e);e=replaceAll("*",sub.star,e);e=replaceAll("'",sub.singlequote,e);e=replaceAll('"',sub.doublequote,e);e=replaceAll("@",sub.at,e);e=replaceAll("+",sub.plus,e);e=replaceAll("1",sub.one,e);e=replaceAll("2",sub.two,e);e=replaceAll("3",sub.three,e);e=replaceAll("4",sub.four,e);e=replaceAll("5",sub.five,e);e=replaceAll("6",sub.six,e);e=replaceAll("7",sub.seven,e);e=replaceAll("8",sub.eight,e);e=replaceAll("9",sub.nine,e);e=replaceAll("0",sub.zero,e);return e}function getSymbols(e){e=replaceAll(sub.commar,",",e);e=replaceAll(sub.fullstop,".",e);e=replaceAll(sub.slash,"/",e);e=replaceAll(sub.question,"?",e);e=replaceAll(sub.exclemation,"!",e);e=replaceAll(sub.colon,":",e);e=replaceAll(sub.semicolon,";",e);e=replaceAll(sub.hash,"#",e);e=replaceAll(sub.persent,"%",e);e=replaceAll(sub.pound,"£",e);e=replaceAll(sub.dollar,"$",e);e=replaceAll(sub.and,"&",e);e=replaceAll(sub.leftbracket,"(",e);e=replaceAll(sub.rightbracket,")",e);e=replaceAll(sub.equals,"=",e);e=replaceAll(sub.dash,"-",e);e=replaceAll(sub.under,"_",e);e=replaceAll(sub.star,"*",e);e=replaceAll(sub.singlequote,"'",e);e=replaceAll(sub.doublequote,'"',e);e=replaceAll(sub.at,"@",e);e=replaceAll(sub.plus,"+",e);e=replaceAll(sub.one,"1",e);e=replaceAll(sub.two,"2",e);e=replaceAll(sub.three,"3",e);e=replaceAll(sub.four,"4",e);e=replaceAll(sub.five,"5",e);e=replaceAll(sub.six,"6",e);e=replaceAll(sub.seven,"7",e);e=replaceAll(sub.eight,"8",e);e=replaceAll(sub.nine,"9",e);e=replaceAll(sub.zero,"0",e);return e}function decryption(e,t){t=replaceAll(" ","",t);var n=t.length;var r=[];var i=[];var s=[];var o="";var u=false;if(e.indexOf(",")!==-1){u=true}if(u){var a=e.substring(e.indexOf(","),f);e=e.substring(0,e.indexOf(","))}var f=e.length;for(var l=0;l<n;l++){var c=letterValue(t.substring(l,l+1));if(c<0){c=c*-1}r.push(c)}for(l=0;l<f;l++){var h=letterValue(e.substring(l,l+1));i.push(h)}for(l=0;l<f;l++){var p=l;if(l>n-1){p=p%n}if(i[l]<0){s[l]=i[l]+r[p]+1;if(s[l]>=0){s[l]-=26}}else{s[l]=i[l]-r[p]+1;if(s[l]<=0){s[l]+=26}}}for(l=0;l<f;l++){o=o+letterOfValue(s[l])}if(u){var d=occourance(a,",");for(l=0;l<d;l++){var v=a.indexOf(",");var m=parseInt(a.substr(1),10);o=o.substring(0,m)+" "+o.substring(m,o.length);var g=a.substr(1);var y=g.indexOf(",");a=g.substr(y)}}o=getSymbols(o);return o}function encryption(e,t){e=substituteSymbols(e);var n;n=locate(e," ");e=replaceAll(" ","",e);t=replaceAll(" ","",t);var r=t.length;var i=e.length;var s=[];var o=[];var u=[];var a="";for(var f=0;f<r;f++){var l=letterValue(t.substring(f,f+1));if(l<0){l=l*-1}s.push(l)}for(f=0;f<i;f++){var c=letterValue(e.substring(f,f+1));o.push(c)}for(f=0;f<i;f++){var h=f;if(f>r-1){h=h%r}if(o[f]<0){u[f]=o[f]-s[h]-1;if(u[f]<-26){u[f]+=26}}else{u[f]=o[f]+s[h]-1;if(u[f]>26){u[f]-=26}}}for(f=0;f<i;f++){a=a+letterOfValue(u[f])}a=a+n;return a}function locate(e,t){var n="";for(var r=0;r<e.length;r++){if(e.substring(r,r+1)===t){n=n+","+r}}return n}function letterValue(e){var t=0;if(e.charCodeAt(0)>=65&&e.charCodeAt(0)<=90){t=(e.charCodeAt(0)-64)*-1}else{t=e.charCodeAt(0)-96}return t}function letterOfValue(e){var t="";if(e<0){e=e*-1+64}else{e=e+96}t=String.fromCharCode(e);return t}function replaceAll(e,t,n){while(n.indexOf(e)>=0){n=n.replace(e,t)}return n}function occourance(e,t){var n=0;while(e.indexOf(t)!=-1){if(e.indexOf(t)!=-1){n+=1}e=e.substring(e.indexOf(t)+1,e.length)}return n}$("#privateChat_ui").remove();$("#audience").append('<div id="privateChat_ui" style="width:348px;height:295px;position:absolute;top:4px;left:0px;background-color:#0A0A0A;opacity: .91;z-number:10000"></div>');$("#privateChat_ui").append('<div id="privateChat_header" style="width:348px;height:42px;position:absolute;top:0px;left:0px;"><span style="color:white;font-family: CalgaryScript,Helvetica,Arial,sans-serif;font-size:28px;position:absolute;left:15px;top:0">Private Chat<img style="float:right;margin-top:2px;margin-left: 8px;" src="http://plug.dj/_/static/images/chat_bubble.0707cbd.png"/></span></div>');$("#privateChat_ui").append('<div id="privateChat_messagesFeed" style="width:333px;height:233px;position:absolute;bottom:30px;right:0px;overflow-x: hidden;overflow-y: auto;"></div>');$("#privateChat_messagesFeed").append("<style>.privateChat_update{color:#d1d1d1;}.privateChat_message{font-family:Helvetica,Arial,sans-serif;font-size:12px;}.privateChat_message:nth-child(2n){color:#1A1A1A;}.privateChat_feed{padding:5px;padding-left:1px;word-wrap:break-word;width:308px;position:relative;}.privateChat_timestamp{color: #777;font-size:10px;float:right;padding-top:1px;padding-left:5px;}.privateChat_0{color:#B0B0B0;}.privateChat_2{color:#e90e82;}.privateChat_1{color: #e90e82;}</style>");$("#privateChat_messagesFeed").append('<div class="privateChat_feed"><span class="privateChat_update">Welcome to plugnet private chat. Version 1.0.0</span></div>');$("#privateChat_ui").append('<div style="left:0;width:348px;position:absolute;border-bottom:1px dotted #292929;bottom:30px;"></div>');$("#privateChat_ui").append('<form onsubmit="return false" style="position:absolute;bottom:5px;left:15px;height:20px;width:295px;"><input type="text" value="" onkeypress="postMessage(event,value)" id="privateChat_messageBox" placeholder="click here to send a private message" maxlength="256" style="font-family: Helvetica,Arial,sans-serif;font-size: 12px;color: #F9F9F9;background-color:transparent;height:100%;width:294px;position:absolute;outline:0 none;border:0 none;"></form>');$("#privateChat_ui").prepend("<style>#privateChat_messageBox:focus::-webkit-input-placeholder{color:transparent;}</style>");var key="MievoeSiegIasTlAtLephOesTienieFoepHLAjOerIuYOeDroUjOAGOustlaKluz";API.on(API.CHAT,privateRecieve);sub=new Object;sub.commar="Wpkx";sub.fullstop="hzai";sub.slash="BiKU";sub.question="aaZn";sub.exclemation="DFMt";sub.colon="ixpz";sub.semicolon="YXKb";sub.hash="cALs";sub.persent="phQr";sub.pound="tpez";sub.dollar="Skqb";sub.and="BhTY";sub.leftbracket="zNqj";sub.rightbracket="SfbV";sub.equals="mFHv";sub.dash="JtAF";sub.under="TgHM";sub.star="pExP";sub.singlequote="MfdC";sub.doublequote="HWgH";sub.at="vpxf";sub.plus="sAzJ";sub.one="CLny";sub.two="nCcT";sub.three="vApA";sub.four="riWT";sub.five="aEfr";sub.six="DAwf";sub.seven="RKwH";sub.eight="TkDZ";sub.nine="oLMh";sub.zero="gqmE"
